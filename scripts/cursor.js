function t(e){let t=e&&e.colors||["#D61C59","#E7D84B","#1B8798"],i=e&&e.element,n=i||document.body,o=window.innerWidth,s=window.innerHeight;const h={x:o/2,y:o/2},c={x:o/2,y:o/2},l=[],d=[];let a,r,A;const u=window.matchMedia("(prefers-reduced-motion: reduce)");function m(){if(u.matches)return console.log("This browser has prefers reduced motion turned on, so the cursor did not init"),!1;a=document.createElement("canvas"),r=a.getContext("2d"),a.style.top="0px",a.style.left="0px",a.style.pointerEvents="none",i?(a.style.position="absolute",n.appendChild(a),a.width=n.clientWidth,a.height=n.clientHeight):(a.style.position="fixed",n.appendChild(a),a.width=o,a.height=s),r.font="21px serif",r.textBaseline="middle",r.textAlign="center",t.forEach((e=>{let t=r.measureText("*"),i=document.createElement("canvas"),n=i.getContext("2d");i.width=t.width,i.height=t.actualBoundingBoxAscent+t.actualBoundingBoxDescent,n.fillStyle=e,n.textAlign="center",n.font="21px serif",n.textBaseline="middle",n.fillText("*",i.width/2,t.actualBoundingBoxAscent),d.push(i)})),n.addEventListener("mousemove",f),n.addEventListener("touchmove",p,{passive:!0}),n.addEventListener("touchstart",p,{passive:!0}),window.addEventListener("resize",g),w()}function g(e){o=window.innerWidth,s=window.innerHeight,i?(a.width=n.clientWidth,a.height=n.clientHeight):(a.width=o,a.height=s)}function p(e){if(e.touches.length>0)for(let t=0;t<e.touches.length;t++)y(e.touches[t].clientX,e.touches[t].clientY,d[Math.floor(Math.random()*d.length)])}function f(e){window.requestAnimationFrame((()=>{if(i){const t=n.getBoundingClientRect();h.x=e.clientX-t.left,h.y=e.clientY-t.top}else h.x=e.clientX,h.y=e.clientY;Math.hypot(h.x-c.x,h.y-c.y)>1.5&&(y(h.x,h.y,d[Math.floor(Math.random()*t.length)]),c.x=h.x,c.y=h.y)}))}function y(e,t,i){l.push(new x(e,t,i))}function w(){!function(){if(0!=l.length){r.clearRect(0,0,o,s);for(let e=0;e<l.length;e++)l[e].update(r);for(let e=l.length-1;e>=0;e--)l[e].lifeSpan<0&&l.splice(e,1);0==l.length&&r.clearRect(0,0,o,s)}}(),A=requestAnimationFrame(w)}function v(){a.remove(),cancelAnimationFrame(A),n.removeEventListener("mousemove",f),n.removeEventListener("touchmove",p),n.removeEventListener("touchstart",p),window.addEventListener("resize",g)}function x(e,t,i){const n=Math.floor(30*Math.random()+60);this.initialLifeSpan=n,this.lifeSpan=n,this.velocity={x:(Math.random()<.5?-1:1)*(Math.random()/2),y:.7*Math.random()+.9},this.position={x:e,y:t},this.canv=i,this.update=function(e){this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.lifeSpan--,this.velocity.y+=.02;const t=Math.max(this.lifeSpan/this.initialLifeSpan,0);e.drawImage(this.canv,this.position.x-this.canv.width/2*t,this.position.y-this.canv.height/2,this.canv.width*t,this.canv.height*t)}}return u.onchange=()=>{u.matches?v():m()},m(),{destroy:v}}export{t as fairyDustCursor};